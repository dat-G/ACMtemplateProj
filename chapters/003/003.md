# 3. å­—ç¬¦ä¸²

>

## 3.1. [STLå­—ç¬¦ä¸²](../001/001.md#121-string)
<!--
```cpp

#include <string>
string s = "hello world";
s.size(); // å­—ç¬¦ä¸²é•¿åº¦
s.empty(); // å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º
s.find("hello"); // æŸ¥æ‰¾å­—ç¬¦ä¸²
s.find("wss")==string::npos; // å¦‚æœä¸å­˜åœ¨
s.substr(0,5); // å­—ç¬¦ä¸²æˆªå–
s.replace(0,5,"hello"); // å­—ç¬¦ä¸²æ›¿æ¢
s.insert(0, "hello"); // å­—ç¬¦ä¸²æ’å…¥
s.erase(0,5); // å­—ç¬¦ä¸²åˆ é™¤
s.erase(0,string::npos); // åˆ é™¤æ‰€æœ‰
s.clear(); // æ¸…ç©ºå­—ç¬¦ä¸²
s.resize(10); // æ”¹å˜å­—ç¬¦ä¸²é•¿åº¦
s.reserve(10); // é¢„ç•™å­—ç¬¦ä¸²é•¿åº¦
s.capacity(); // å­—ç¬¦ä¸²å®¹é‡
s.shrink_to_fit(); // å­—ç¬¦ä¸²é•¿åº¦è°ƒæ•´
s.swap(s); // äº¤æ¢å­—ç¬¦ä¸²
s.compare("hello"); // æ¯”è¾ƒå­—ç¬¦ä¸²
s.compare(0,5,"hello"); // æ¯”è¾ƒå­—ç¬¦ä¸²
s.compare(0,5,"hello",5); // æ¯”è¾ƒå­—ç¬¦ä¸²
s.compare(0,5,"hello",5,5); // æ¯”è¾ƒå­—ç¬¦ä¸²
s.find_first_of("hello"); // æŸ¥æ‰¾å­—ç¬¦ä¸²
s.find_last_of("hello"); // æŸ¥æ‰¾å­—ç¬¦ä¸²
//and so on
```
-->

## 3.2. å­—ç¬¦ä¸²åŒ¹é…

### 3.2.1. BFç®—æ³•

> Brute force: \
> æš´åŠ›åŒ¹é… \
> æ—¶é—´å¤æ‚åº¦: O(n$^2$) \
> åƒåœ¾ï¼Œstring.find()éƒ½æ¯”å®ƒå¿«ã€‚ \

```cpp
char ss1[N], ss2[N]; 
void brute_force() {
    int len1 = strlen(ss1 + 1), len2 = 1(ss2 + 1);
    for (int i = 0; i < len1 - len2 + 1; ++i) {
        for (int j = 0; j < len2; ++j) {
            if (ss1[i + j] != ss2[j]) break;
        }
        if (j == len2) return i;
    }
    return -1;
}
```

### 3.2.2. KMPç®—æ³•

æ­¤kmpï¼Œnextæ•°ç»„å­˜å‚¨çš„æ˜¯å­ä¸²ä¸­åŒ¹é…æ­£ç¡®çš„æœ€å¤§çš„å­—ç¬¦ä½ç½®ã€‚ï¼ˆQAQï¼‰

> Knuth-Morris-Pratt: \
> å­—ç¬¦ä¸²åŒ¹é…ç®—æ³• \
> æ—¶é—´å¤æ‚åº¦: O(n + m) \
> é«˜æ•ˆçš„åŒ¹é…ç®—æ³•ä¸”nextæ•°ç»„çš„æ€§è´¨ååˆ†å®ç”¨ã€‚ \

```cpp
char ss1[N],ss2[N];
int nt[N + 100] = {-1};//éƒ¨åˆ†ç¼–è¯‘å™¨ä¸èƒ½ç”¨nextå‘½å,éœ€nt[0]èµ‹å€¼ä¸º-1
int kmp() {    
    //æ±‚nextæ•°ç»„ï¼Œæ­¤å¤„ä»¥ss2ä¸ºä¾‹
    int p = 0;
    for (int i = 1; i <= ss2[i]; i++) {
        while (p && ss2[i] != ss2[p + 1]) p = nt[p];//pæŒ‡å‘è¦æ¯”è¾ƒçš„å­—ç¬¦
        nt[i] = p++;//å‚¨å­˜nextå€¼
    }
    //æ±‚åŒ¹é…ä½ç½®ï¼ŒæŒ‡ss1ä¸ss2åŒ¹é…çš„ä½ç½®,ä¹Ÿå°±æ˜¯ss2åœ¨ss1ä¸­çš„ç¬¬ä¸€ä¸ªç›¸åŒå­ä¸²çš„èµ·å§‹ä½ç½®
    p = 1;
    for (int i = 1; ss1[i]; i++,p++) {
        while (p && ss1[i] != ss2[p]){
            p = nt[p - 1];
        if (!ss2[p]) return i - p + 1;è¿”å›èµ·å§‹ä½ç½®
        }
    }
    return -1;//æœç´¢å¤±è´¥è¿”å›-1
}
```

### 3.2.3. å­—å…¸æ ‘ç®—æ³•

> Trie: \

```cpp
char str1[N];//è¦å­˜çš„å­—ç¬¦ä¸²
struct trie_node {
    int now = 0;
    int son[N << 4][30];//æ­¤å¤„ä»¥è‹±æ–‡å•è¯å­—å…¸æ ‘ä¸ºä¾‹ï¼Œç©ºé—´æ˜¯åŠ¨æ€å¼€ç‚¹æ‰€ä»¥æœ‰å¯èƒ½å¼€å¤ªå° 
    void add(int i,int st){//stè¡¨ç¤ºå­˜å‚¨ç¬¬iä½å­—æ¯,iè¾“å…¥ä¸ºæ ¹èŠ‚ç‚¹ä¸€èˆ¬ä¸º1
        if(str1[st] == '\0')return; 
        int p = str1[i] - 'A';//æ±‚å„¿å­èŠ‚ç‚¹ä¸‹æ ‡
        if(son[i][p] == 0)son[i][p] = ++now;//åæ ‡å‚¨å­˜
        add(son[i][p],st + 1);
    }
    void cl(int i){//æ¸…ç†ç”¨,iè¾“å…¥æ ¹èŠ‚ç‚¹ä¸€èˆ¬ä¸º1
        for(int p = 1;p <= 26;p++){
            if(son[i][p] != 0){
                cl(son[i][p]);//å…ˆæ¸…ç†å­æ ‘å†æ¸…ç†æ ¹
                son[i][p] = 0;
            }
        }
    }
};
```

### 3.2.4. ACè‡ªåŠ¨æœº

> Trie:\
> æ ‘ä¸Škmp æ ¹æ®æ¨¡å¼ä¸²å‰ç¼€å…³ç³»ç”Ÿæˆå­—å…¸æ ‘ï¼Œ
> å†æ ¹æ®å­—å…¸æ ‘æ ‘é“¾ä¸Šçš„å…¬å…±å‰åç¼€ç”Ÿæˆå¯¹åº”çš„failæ ‘
„failæ ‘
